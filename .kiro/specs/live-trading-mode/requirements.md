# Requirements Document

## Introduction

Пользователь столкнулся с проблемой, что торговый бот работает в тестовом режиме (TEST_MODE=True) вместо реальной торговли, несмотря на то, что в локальном файле конфигурации указано TEST_MODE=false. Необходимо обеспечить корректный переход от тестового режима к реальной торговле с соответствующими проверками безопасности и конфигурацией.

## Requirements

### Requirement 1

**User Story:** Как пользователь торгового бота, я хочу, чтобы бот работал в реальном режиме торговли, а не в тестовом, чтобы выполнять настоящие сделки на бирже.

#### Acceptance Criteria

1. WHEN пользователь устанавливает TEST_MODE=false в конфигурации THEN система SHALL использовать реальные API вызовы к Binance
2. WHEN бот выполняет торговые операции в реальном режиме THEN система SHALL отправлять реальные ордера на биржу
3. WHEN бот работает в реальном режиме THEN логи SHALL показывать "LIVE" вместо "TEST"
4. WHEN система запускается THEN она SHALL корректно определять режим работы из переменных окружения

### Requirement 2

**User Story:** Как пользователь, я хочу иметь четкое разделение между тестовой и продакшн конфигурацией, чтобы избежать случайного запуска в неправильном режиме.

#### Acceptance Criteria

1. WHEN система запускается в продакшн среде THEN она SHALL использовать продакшн переменные окружения
2. WHEN конфигурация содержит противоречивые настройки THEN система SHALL приоритизировать переменные окружения деплоя
3. WHEN бот переключается в реальный режим THEN система SHALL логировать предупреждение о реальной торговле
4. IF API ключи не настроены для реальной торговли THEN система SHALL отображать соответствующее предупреждение

### Requirement 3

**User Story:** Как пользователь, я хочу иметь проверки безопасности при переходе в реальный режим торговли, чтобы избежать случайных потерь.

#### Acceptance Criteria

1. WHEN система переключается в реальный режим THEN она SHALL проверить валидность API ключей
2. WHEN бот работает в реальном режиме THEN система SHALL проверять минимальные балансы перед торговлей
3. WHEN происходит переключение в реальный режим THEN система SHALL логировать все критические параметры
4. IF баланс недостаточен для торговли THEN система SHALL предупредить пользователя и остановить торговлю

### Requirement 4

**User Story:** Как пользователь, я хочу иметь возможность легко переключаться между тестовым и реальным режимом через конфигурацию, чтобы тестировать стратегии перед реальной торговлей.

#### Acceptance Criteria

1. WHEN пользователь изменяет TEST_MODE в конфигурации THEN система SHALL применить изменения при следующем запуске
2. WHEN система работает в тестовом режиме THEN она SHALL симулировать все торговые операции
3. WHEN система работает в реальном режиме THEN она SHALL выполнять реальные торговые операции
4. WHEN режим изменяется THEN система SHALL четко отображать текущий режим в логах и статусе